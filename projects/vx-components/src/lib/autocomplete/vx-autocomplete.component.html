<vx-form-field [vxAttachMenu]="menu" (click)="focus()"
               [class.vx-focused]="menu.visible || field.focused" (keyup.backspace)="_handleBackspace($event)">

  <button vx-button color="primary" *ngFor="let item of _selectedItems" class="vx-autocomplete-chip"
          (click)="_removeItem(item.value); $event.stopPropagation()"
          (keydown.backspace)="_removeItem(item.value); $event.stopPropagation();">
    <!--<ng-container *ngTemplateOutlet="item._template"></ng-container>-->
    {{item.getTextContent()}}

    <span class="vx-autocomplete-chip-delete">X</span>
  </button>

  <div class="vx-autocomplete-input-wrapper" #focusEl [tabIndex]="searchable ? -1 : tabIndex"
       (blur)="searchable ? null : _handleFieldFocusChange(false)"
       (focus)="searchable ? null : _handleFieldFocusChange(true)">
    <input vxFormField [label]="label" [placeholder]="placeholder" #field="vxFormField"
           (keydown.ArrowDown)="_showMenu()" [attr.disabled]="!searchable || undefined" [disabled]="disabled">

    <div class="vx-autocomplete-down-arrow"></div>
  </div>
</vx-form-field>

<vx-menu #menu [positionStrategy]="_positionStrategy" [defaultText]="defaultText" class="vx-autocomplete-menu">
  <vx-item *ngFor="let item of _filteredItems" [_parent]="item"></vx-item>
</vx-menu>
